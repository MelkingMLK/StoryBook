/* =========================================
   VARIABILI E RESET
   ========================================= */
:root {
    /* RIPRISTINATO: Sfondo Bianco Nebbia */
    --color-sfondo: #f0f0f0; 
    
    /* Header rimane Nero per contrasto */
    --color-header: #0a0a0a;
    
    /* Testo Navigazione (su sfondo nero) */
    --color-testo-nav: #ffffff; 
    
    /* Accento Viola (per le ombre o dettagli) */
    --color-viola-neon: #9611fe;
    
    /* Nuovo: Colore Anello */
    --color-anello: #000000;
}

html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    font-family: 'Arial', sans-serif;
    overflow: hidden; 
}

body {
    background-color: var(--color-sfondo); 
    color: #000; /* Testo generico nero su sfondo bianco */
    display: flex;
    flex-direction: column; 
}

/* =========================================
   HEADER (NAVBAR) - Rimane scuro
   ========================================= */
header {
    flex: 0 0 auto;
    width: 100%;
    background-color: var(--color-header); 
    padding: 10px 0;
    border-bottom: 2px solid var(--color-viola-neon);
    /* Ombra esterna per staccarlo dallo sfondo bianco */
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    z-index: 100;
}

.navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

.nav-links {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
}

.nav-links li { margin: 0 15px; }

.nav-links a {
    text-decoration: none;
    color: var(--color-testo-nav); /* Bianco */
    font-family: 'Playfair Display', serif;
    font-weight: 700;
    font-size: 1.1em;
    padding: 5px;
    transition: 0.3s;
}

.nav-links a:hover {
    color: var(--color-viola-neon);
    text-shadow: 0 0 10px var(--color-viola-neon);
}

/* LOGO MELKING */
.logo { display: flex; justify-content: center; }

.melking-title {
    font-family: 'Major Mono Display', monospace; 
    font-size: 3vw; 
    margin: 0 40px;
    color: white; /* Scritta bianca su header nero */
    text-shadow: 
        0 0 10px var(--color-viola-neon),
        0 0 20px var(--color-viola-neon);
}

.melking-title a { text-decoration: none; color: inherit; }

/* =========================================
   MAIN 3D (CENTRALE)
   ========================================= */
main {
    flex: 1 1 auto;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    perspective: 1200px; /* Profondità per il 3D */
    position: relative;
    /* Sfondo bianco nebbia ereditato dal body */
}

.king-wrapper {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    transform-style: preserve-3d; 
}

/* --- L'ANELLO ORBITALE (NERO E DIAGONALE) --- */
/* --- L'ANELLO ORBITALE (FLUIDO E OSCILLANTE) --- */
.orbit-ring {
    position: absolute;
    width: 65vh; 
    height: 65vh;
    
    /* Bordo Nero */
    border: 5px solid var(--color-anello);
    border-radius: 50%;
    
    /* Ombra leggera per profondità */
    box-shadow: 0 10px 20px rgba(0,0,0,0.3);
    
    /* CHANGE: 'linear' assicura che non rallenti mai alla fine del giro */
    animation: spinOscillate 12s linear infinite;
    
    z-index: -1; 
    pointer-events: none;
    
    /* Fallback partenza */
    transform: rotateZ(-45deg) rotateX(75deg);
}

/* --- LA SCINTILLA 3D (LARGE & GLOWING) --- */
/* --- LA SCINTILLA 3D (FORMA STELLARE/ROMBO) --- */
.orbit-ring::after {
    content: "";
    position: absolute;
    
    /* Posizionamento */
    top: -10px; /* Aggiustato per il rombo */
    left: 50%;
    /* NOTA: Il transform: translateX(-50%) è stato spostato dentro l'animazione qui sotto */
    
    /* FORMA: Quadrato (che ruoteremo) */
    width: 18px;
    height: 18px;
    /* RIMOSSO: border-radius: 50%; -> Ora ha angoli vivi */
    
    /* Colore: Gradiente centrale intenso */
    background: radial-gradient(circle at center, #ffffff 30%, var(--color-viola-neon) 100%);
    
    /* Super Glow (Immutato, l'alone rende la stella luminosa) */
    box-shadow: 
        0 0 15px 4px #fff, /* Nucleo bianco più forte */
        0 0 30px 10px var(--color-viola-neon),
        0 0 60px 20px rgba(150, 17, 254, 0.6);
        
    /* Nuova animazione che include la rotazione a rombo */
    animation: pulseSparkDiamond 1.5s ease-in-out infinite alternate;
}

/* NUOVA ANIMAZIONE PER IL ROMBO */
/* Include: Centratura X, Rotazione 45° (rombo), Pulsazione Scala */
@keyframes pulseSparkDiamond {
    from { 
        transform: translateX(-50%) rotate(45deg) scale(1); 
    }
    to { 
        /* Pulsa diventando più grande e ruotando leggermente di più per effetto dinamico */
        transform: translateX(-50%) rotate(55deg) scale(1.3); 
    }
}

/* Animazione Rotazione (La stessa, ma ora eseguita in modo Lineare) */
@keyframes spinOscillate {
    0% { transform: rotateZ(-45deg) rotateX(75deg) rotateZ(0deg); }
    25% { transform: rotateZ(-40deg) rotateX(70deg) rotateZ(90deg); }
    50% { transform: rotateZ(-55deg) rotateX(60deg) rotateZ(180deg); }
    75% { transform: rotateZ(-50deg) rotateX(70deg) rotateZ(270deg); }
    100% { transform: rotateZ(-45deg) rotateX(75deg) rotateZ(360deg); }
}

/* Nuova animazione per far "respirare" la luce della scintilla */


/* Animazione che mantiene l'inclinazione diagonale mentre gira */
@keyframes spinDiagonal {
    0% { 
        transform: rotateZ(-45deg) rotateX(75deg) rotateZ(0deg); 
    }
    100% { 
        transform: rotateZ(-45deg) rotateX(75deg) rotateZ(360deg); 
    }
}

/* --- IMMAGINE KING --- */
.king-image {
    width: auto;
    height: auto;
    max-width: 85vw;
    max-height: 75vh;
    
    object-fit: contain;
    
    /* Ombra scura invece che luminosa, dato lo sfondo bianco */
    filter: drop-shadow(0 10px 15px rgba(0, 0, 0, 0.4)); 
    
    /* Stacca l'immagine dall'anello */
    transform: translateZ(30px);
    
    animation: zoomInReveal 1.5s cubic-bezier(0.2, 1, 0.3, 1) forwards;
}

@keyframes zoomInReveal {
    0% { opacity: 0; transform: scale(0.8) translateZ(0); }
    100% { opacity: 1; transform: scale(1) translateZ(30px); }
}

/* MEDIA QUERY */
@media (max-width: 992px) {
    .navbar { flex-direction: column; }
    .nav-segment { margin: 10px 0; }
    .melking-title { font-size: 8vw; }
    .orbit-ring { width: 85vw; height: 85vw; } 
}